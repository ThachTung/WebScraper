<!DOCTYPE html>
<html>
<head>
    <title>Player Cards</title>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        #loading {
            text-align: center;
            display: none;
        }
        #error {
            color: red;
            text-align: center;
            display: none;
        }
        table.dataTable tbody td {
            vertical-align: middle;
            padding: 10px;
        }
        .card-image {
            max-width: 100px;
            max-height: 100px;
            object-fit: contain;
        }
        .price {
            color: #2ecc71;
            font-weight: bold;
        }
        table.dataTable {
            width: 100% !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 id="playerName">Loading...</h1>
        <div id="loading">Loading data...</div>
        <div id="error"></div>
        <table id="cardsTable" class="display" style="width:100%">
            <thead>
                <tr>
                    <th>Title</th>
                    <th>Price</th>
                    <th>Image</th>
                    <th>Sold Date</th>
                    <th>Link</th>
                </tr>
            </thead>
        </table>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
    <script>
        $(document).ready(function() {
            $('#playerName').text("Lamine Yamal");

            $('#loading').show();
            
            $.ajax({
                url: '../../soldprice/data/scrapeddata/lamine_yamal.csv',
                dataType: 'text',
            }).done(function(csvData) {
                const lines = csvData.split('\n');
                const headers = lines[0].split(',');
                const data = [];

                for (let i = 1; i < lines.length; i++) {
                    const values = lines[i].split(',');
                    const row = {};
                    for (let j = 0; j < headers.length; j++) {
                        row[headers[j]] = values[j];
                    }
                    data.push(row);
                }
                
                $('#cardsTable').DataTable({
                    data: data,
                    columns: [
                        { data: 'Title', title: 'Title' },
                        { data: 'Price', title: 'Price' },
                        { data: 'Image', title: 'Image' },
                        { data: 'Sold Date', title: 'Sold Date' },
                        { data: 'Link', title: 'Link' }
                    ],
                    pageLength: 25,
                    scrollX: true
                });
                $('#loading').hide();
            }).fail(function(error) {
                $('#loading').hide();
                $('#error').text('Error loading data: ' + error.statusText).show();
            });
        });
    </script>
</body>
</html>
